\section{随机序列的收敛性}

\paragraph{1. 引例} 设$X_1, X_2, \cdots$ 是一列随机变量, 我们希望知道 $n$ 很大时 $X_n$ 近似地是什么样的随机变量. 这也称为随机变量的收敛性. 

我们在起初的时候说明了公理的方法描述了概率. 但是, 这些公理化的方法是不是真的描述了我们想要的呢? 也就是: 具有直观上的“频率的稳定值”的含义呢?(见\cref{sec:prob-stat-defn}.) 更加正式地说, 若 $A$ 在 $n$ 次独立试验中发生了 $\mu_n$次, 问: 当 $n$ 很大时, $\frac{\mu_n}{n}$ 是否与 $P(A)$ 很接近?

\begin{example}
    先考虑使用示性函数做的一个简单的例子. 令$$
    X_i= \begin{cases}1, & \text { 当第 } i \text { 次试验时 } A \text { 发生, } \\ 0, & \text { 当第 } i \text { 次试验时 } A \text { 不发生 }\end{cases}
    $$
    $(i=1,2, \cdots)$, 则 $X_1, X_2, \cdots$ 是随机变量序列. 所谓 $n$ 次独立试验, 就是指随机变量 $X_1, \cdots, X_n$ 相互独立. 显然 $A$ 发生的次数 $\mu_n=\sum_{i=1}^n X_i$. 记 $X_n=\frac{1}{n} \sum_{i=1}^n X_i(n \geqslant 1)$. 问题是: 当 $n$ 很大时, 随机变量 $X_n$ 是否与常数 $P(A)$ 很接近?

    我们可以对于任何随机变量 $X$, 我们可以使用比较简单的离散型随机变量 $X^*$ 来近似 $X, 0 \leqslant X-X^*<\varepsilon$, 这里我们选取比较简单的分段函数$X^*$ , 它与 $\varepsilon$ 有关.$$
    X^*= \begin{cases}0, & 0 \leqslant X<\varepsilon, \\ -\varepsilon, & -\varepsilon \leqslant X<0, \\ \varepsilon, & \varepsilon \leqslant X<2 \varepsilon, \\ \cdots \cdots & \cdots \cdots \\ k \varepsilon, & k \varepsilon \leqslant X<(k+1) \varepsilon \quad(k \text { 是任何整数) }, \\ \cdots \cdots & \cdots \cdots\end{cases}
    $$
     实际上, $X^*=\left\lfloor\frac{1}{\varepsilon} X\right\rfloor \varepsilon$. 令 $\varepsilon=\frac{1}{n}, X_n=X^*$, 则 $n$ 很大时 $X_n$与 $X$ 任意接近.
\end{example}

\begin{example}
    一个射手向一目标连续射击 6000 次, 每次射中的概率是 $\frac{1}{6}$,问: 射中次数在 900 至 1100 之间的概率是多少? 这个问题从理论上不难回答, 从第一章知这个概盗等于 $\sum_{k=900}^{1100} {6000\choose k}\left(\frac{1}{6}\right)^k\left(\frac{5}{6}\right)^{5000-k}$, 但具体数值如何算出, 这就不容易了. 用 $\mu_{6000}$ 表示 6000 次射击中射中的次数, 能否找到比较简单的随机变量 $\eta$, 其分布函数比较好算( 或其数值可从造好的表中查出), 使得 $\mu_{6000}$ 与 $\eta$ 很接近或者说
$$
P\left(900 \leqslant \mu_{6000} \leqslant 1100\right) \approx P(900 \leqslant \eta \leqslant 1100) .
$$
\end{example}

\paragraph{2. 三个收敛性质} 我们下面考察三种重要的定义: 我们假设 $\eta$ 和 $X_1, X_2, \cdots$ 都是随机变量. 我们再次强调: 这些随机变量$\eta=\eta(\omega), X_1=X_1(\omega)$, $\cdots, X_n=X_n(\omega), \cdots$, 实质上都是概率空间 $(\Omega, \mathscr{F}, P)$ 上的实值函数!

但是为了简便起见, 我们在事件的表述上常常省去了 $\omega$, 实际上:
$$
\begin{gathered}
\left\{\left|X_n-\eta\right| \geqslant \varepsilon\right\}:=\left\{\omega:\left|X_n(\omega)-\eta(\omega)\right| \geqslant \varepsilon\right\}, \\
\left\{\lim _{n \rightarrow \infty} X_n=\eta\right\}:=\left\{\omega: \lim _{n \rightarrow \infty} X_n(\omega):=\eta(\omega)\right\}, \\
\left\{X_n \leqslant x\right\}:=\left\{\omega: X_n(\omega) \leqslant x\right\}, \quad\{\eta \leqslant x\}=\{\omega: \eta(\omega) \leqslant x\} .
\end{gathered}
$$

我们在下面的论述中, 常常省略 $\omega$.

\begin{center}
    \boxed{\text{我们假设 $\eta$ 和 $X_1, X_2, \cdots$ 都是随机变量.}}
\end{center}

\begin{definition}
    称 $X_1, X_2, \cdots$ 依概率收敛于 $\eta$, 若对任何 $\varepsilon>0$, 成立
$$
\lim _{n \rightarrow \infty} P\left(\left|X_n-\eta\right| \geqslant \varepsilon\right)=0 .
$$

此时记做 $X_n \stackrel{P}{\longrightarrow} \eta$.
\end{definition}

\begin{definition}
    称 $X_1, X_2, \cdots$ 概率为 1 (或几乎必然) 地收敛于 $\eta$, 若
$$
P\left(\lim _{n \rightarrow \infty} X_n=\eta\right)=1 .
$$

此时记做 $X_n \stackrel{\text { a.s. }}{\longrightarrow} \eta$ 或 $X_n \rightarrow \eta$ (a.s. ). a. s. 是英文 almost surely 的缩写.
\end{definition}

\begin{definition}
    称 $X_1, X_2, \cdots$ 若收敛(依分布收敛)于 $\eta$, 若对 $\eta$ 的分布函数 $F(x)$ 的任何连续点 $x$, 皆成立
    $$
    \lim _{n \rightarrow \infty} P\left(X_n \leqslant x\right)=P(\eta \leqslant x) .
    $$
    
    此时记做 $X_n \stackrel{w}{\longrightarrow} \eta$ (或 $X_n \stackrel{d}{\longrightarrow} \eta$ ).
\end{definition}

其中依分布收敛和随机变量的矩母函数很有关联. 如果我们设 $Y_1, Y_2, \dots$ 是一系列随机变量, $Y_i$的分布函数为$F_i$. 自然, 它的矩母函数为$M_X(t)=\Ep{ e^{t X}}$, 是一个随机变量. 我们(不加证明地)给出下面的定理. 这在后面证明大数定律的时候很有用处. 

\begin{theorem}
    \label{thm:dist-moment}
    如果我们设 $Y_1, Y_2, \dots$ 是一系列随机变量. $Y_i$的分布函数为$F_i$, 矩母函数为$M_i$. 令$Y$是一个随机变量, 且$Y$的分布函数为$F$, 矩母函数为$M$. 如果$\forall t,$ 都有$\lim _{n \rightarrow \infty} M_n(t)=M(t)$, 那么对于所有使得$F(t)$连续的$t$, 都有$F_n \stackrel{w}{\longrightarrow} F$. 
\end{theorem}

\paragraph{3. 三个收敛性的联系}

\begin{theorem}
    设 $X_n \stackrel{\text { a. s. }}{\longrightarrow} \eta$, 则 $X_n \stackrel{P}{\longrightarrow} \eta$.
\end{theorem}

\begin{proof}
    假设有一个集合 $A=\left\{\omega: X_1(\omega), X_2(\omega), \cdots\right.$ 不收敛于 $\left.\eta(\omega)\right\}$. 从假设知 $P(A)=0$. 对任何 $\varepsilon>0$, 令
$B=\left\{\omega\right.$ : 有无穷多个 $n$ 使得 $\left.\left|X_n(\omega)-\eta(\omega)\right| \geqslant \varepsilon\right\}$,
$B_m=\left\{\omega\right.$ : 有 $n \geqslant m$ 使得 $\left.\left|X_n(\omega)-\eta(\omega)\right| \geqslant \varepsilon\right\}$,则 $B_m \supset B_{m+1}, B=\bigcap_{m=1}^{\infty} B_m$.

于是 $\lim _{m \rightarrow \infty} P\left(B_m\right)=P(B) \leqslant P(A)=0$. 因为 $P\left(\left|X_m-\eta\right| \geqslant \varepsilon\right) \leqslant$ $P\left(B_m\right)$. 所以 $\lim P\left(\left|X_m-\eta\right| \geqslant \varepsilon\right)=0$. 这就证明了 $X_n \stackrel{P}{\longrightarrow} \eta$.
\end{proof}

应注意的是, 上述定理的逆不成立. 下面的例子给出一个反例: 

\begin{example}
    设 $\Omega=(0,1), \mathscr{F}$ 由 $(0,1)$ 中所有 Borel 子集组成, $P$ 是这样的概率测度: 对任何区间 $(a, b)(0 \leqslant a<b \leqslant 1), P((a, b))=b-a$. 在概率空间 $(\Omega, \mathscr{F}, P)$ 上考虑下列随机变量序列.

    对任何正整数 $k$ 及 $j=1,2, \cdots, 2^k$, 令
$$
\begin{aligned}
X_{k 1} & = \begin{cases}1, & 0<\omega<\frac{1}{2^k}, \\
0, & \text { 其他; }\end{cases} \\
X_{k j} & = \begin{cases}1, & \frac{j-1}{2^k} \leqslant \omega<\frac{j}{2^k}, \quad(j>1) . \\
0, & \text { 其他 }\end{cases}
\end{aligned}
$$

这些 $\left\{X_{k j}: k \geqslant 1, j=1,2, \cdots, 2^k\right\}$ 可排成一个序列: $X_{11}, X_{12}, X_{21}, X_{22}$, $X_{23}, X_{24}, X_{31}, X_{32}, \cdots, X_{38}, X_{41}, \cdots$ (用 “字典排列法”, 按第 1 个下标 $k$ 从小到大排, 第 1 个下标相同者则按第 2 个下标从小到大排). 把这个序列依次记为 $X_1, X_2, \cdots$. 易知, 对每个 $n \geqslant 1$ 有 $k_n$ 和 $j_n$ 使得 $X_n=X_{k_n j_n}$ 对任何 $\varepsilon \in(0,1), P\left(\left|X_n\right| \geqslant \varepsilon\right)=P\left(X_n=1\right)=\frac{1}{2^{k_n}}$. 由于 $n \rightarrow \infty$ 时 $k_n \rightarrow \infty$, 故有 $\lim _{n \rightarrow \infty} P\left(\left|X_n\right| \geqslant \varepsilon\right)=0$. 这表明 $X_n \stackrel{P}{\longrightarrow} 0$.

但是, 对任何 $\omega \in(0,1), \lim _{n \rightarrow \infty} X_n(\omega)$ 不存在. 实际上, 对任何 $\omega$和 $k$ 有唯一的 $j_k$ 使得 $X_{k j_k}(\omega)=1$, 从而 $j \neq j_k$ 时 $X_{k j}(\omega)=0$. 由此可见,数列 $X_1(\omega), X_2(\omega), \cdots$ 中有无穷多个是 1 , 又有无穷多个是 0 , 因而 $\lim _{n \rightarrow \infty} X_n(\omega)$ 不存在.
\end{example}

\begin{theorem}
    设 $X_n \stackrel{P}{\longrightarrow} \eta$, 则 $X_n \stackrel{w}{\longrightarrow} \eta$.
\end{theorem}

\begin{proof}
    设 $x_0$ 是 $\eta$ 的分布函数 $F(x)$ 的连续点. 记 $F_n(x)=P\left(X_n \leqslant\right.$ $x)(n \geqslant 1)$. 易知, 对任何 $\varepsilon>0$, 有
$$
\begin{aligned}
\left\{X_n \leqslant x_0\right\} & =\left\{X_n-\eta+\eta \leqslant x_0\right\} \\
& \subset\left\{X_n-\eta \leqslant-\varepsilon\right\} \cup\left\{\eta \leqslant x_0+\varepsilon\right\},
\end{aligned}
$$

于是
$$
P\left(X_n \leqslant x_0\right) \leqslant P\left(X_n-\eta \leqslant-\varepsilon\right)+P\left(\eta \leqslant x_0+\varepsilon\right) .
$$

故$$\red{F_n\left(x_0\right)-F\left(x_0\right)} \leqslant P\left(\left|X_n-\eta\right| \geqslant \varepsilon\right)+F\left(x_0+\varepsilon\right)-F\left(x_0\right) .$$

类似地, 有
$$
\left\{X_n \leqslant x_0\right\} \supset\left\{X_n-\eta \leqslant-\varepsilon, \eta \leqslant x_0-\varepsilon\right\} .
$$

于是$$
\begin{aligned}
P\left(X_n \leqslant x_0\right) & \geqslant P\left(X_n-\eta \leqslant \varepsilon \text { 且 } \eta \leqslant x_0-\varepsilon\right) \\
& \geqslant P\left(\eta \leqslant x_0-\varepsilon\right)-P\left(X_n-\eta>\varepsilon\right)
\end{aligned}
$$
(因为 $P(A \cap B) \geqslant P(B)-P(\bar{A})$ ).
故
$$
\begin{aligned}
F_n\left(x_0\right) & \geqslant F\left(x_0-\varepsilon\right)-P\left(\left|X_n-\eta\right| \geqslant \varepsilon\right), \\
\color{red}F_n\left(x_0\right)-F\left(x_0\right) & \geqslant F\left(x_0-\varepsilon\right)-F\left(x_0\right)-P\left(\left|X_n-\eta\right| \geqslant \varepsilon\right)
\end{aligned}
$$

由于上述两个红色的式子可见, $$
\left|F_n\left(x_0\right)-F\left(x_0\right)\right| \leqslant F\left(x_0+\varepsilon\right)-F\left(x_0-\varepsilon\right)+P\left(\left|X_n-\eta\right| \geqslant \varepsilon\right) .
$$
由于 $x_0$ 是 $F(x)$ 的连续点, 因此对任何 $\delta>0$, 有 $\varepsilon>0$ 满足 $F\left(x_0+\varepsilon\right)$ $F\left(x_0-\varepsilon\right)<\frac{\delta}{2}$. 再取 $n_0$, 当 $n \geqslant n_0$ 时, $P\left(\left|X_n-\eta\right| \geqslant \varepsilon\right)<\frac{\delta}{2}$. 于是对一切 $n$ $\geqslant n_0$ 有 $\left|F_n\left(x_0\right)-F\left(x_0\right)\right|<\delta$. 这就证明了 $F_n\left(x_0\right) \rightarrow F\left(x_0\right)(n \rightarrow \infty)$. 故 $X_n \stackrel{w}{\longrightarrow} \eta$.
\end{proof}

同样, 这个定理的逆命题不成立. 我们举出一个反例: 

\begin{example}
    设 $X \sim N(0,1)$, 令
$$
X_{2 n-1}=X, \quad X_{2 n}=-X \quad(n \geqslant 1) .
$$

易知所有的 $X_n$ 有相同的分布函数 $\Phi(x)$. 这个 $\Phi(x)$ 是标准正态分布函数. 当然 $X_n \stackrel{w}{\longrightarrow} X$. 但是, 对 $\varepsilon>0$ 有
$$
P\left(\left|X_n-X\right| \geqslant \varepsilon\right)= \begin{cases}0, & n \text { 是奇数, } \\ P\left(|X| \geqslant \frac{\varepsilon}{2}\right), & n \text { 是偶数. }\end{cases}
$$

可见 $X_n$ 并不依概率收敛于 $X$.
\end{example}

\begin{theorem}
    设 $\begin{aligned} & X_n \stackrel{w}{\longrightarrow} X, \eta_n \stackrel{P}{\longrightarrow} 0 \text {, 则 }  & X_n+\eta_n \stackrel{w}{\longrightarrow} X .\end{aligned}$
\end{theorem}
{\small{
    %\linespread{0.5}
\begin{proof}
    设 $x_0$ 是 $X$ 的分布函数 $F(x)$ 的连续点. 对于 $\varepsilon>0$, 易知
$$
\begin{aligned}
P\left(X_n+\eta_n \leqslant x_0\right) & \leqslant P\left(\eta_n \leqslant-\varepsilon\right)+P\left(X_n \leqslant x_0+\varepsilon\right) \\
& \leqslant P\left(\left|\eta_n\right| \geqslant \varepsilon\right)+P\left(X_n \leqslant x_0+\varepsilon\right),
\end{aligned}
$$

于是
$$
\begin{aligned}
&P\left(X_n+\eta_n \leqslant x_0\right)-F\left(x_0\right)\\
&\begin{aligned}
\leqslant & P\left(\left|\eta_n\right| \geqslant \varepsilon\right)+P\left(X_n \leqslant x_0+\varepsilon\right)-F\left(x_1+\varepsilon\right) \\
& +F\left(x_0+\varepsilon\right)-F\left(x_0\right) . \qquad\qquad\qquad (*)
\end{aligned}
\end{aligned}
$$
另一方面,
$$
\begin{aligned}
P\left(X_n+\eta_n \leqslant x_0\right) & \geqslant P\left(X_n \leqslant x_0-\varepsilon, \eta_n \leqslant \varepsilon\right) \\
& \geqslant P\left(X_n \leqslant x_0-\varepsilon\right)-P\left(\eta_n>\varepsilon\right) \\
& \geqslant P\left(X_n \leqslant x_0-\varepsilon\right)-P\left(\left|\eta_n\right| \geqslant \varepsilon\right)\qquad\qquad\qquad (**)
\end{aligned}
$$

于是
$$
\begin{aligned}
P\left(X_n+\right. & \left.\eta_n \leqslant x_0\right)-F\left(x_0\right) \\
\geqslant & P\left(X_n \leqslant x_0-\varepsilon\right)-F\left(x_0-\varepsilon\right)+F\left(x_0-\varepsilon\right) \\
& -F\left(x_0\right)-P\left(\left|\eta_n\right| \geqslant \varepsilon\right) .
\end{aligned}
$$

任给定 $\delta>0$, 取 $\varepsilon_1>0$ 足够小使得 $F\left(x_0+\varepsilon_1\right)-F\left(x_0\right)<\frac{\delta}{3}$ 且 $x_0+\varepsilon_1$ 是 $F(x)$的连续点 (单调函数在任何小区间内均有连续点.). 由于 $X_n \stackrel{w}{\longrightarrow} X, \eta_n \stackrel{P}{\longrightarrow} 0$, 有 $n_1$ 使得对一切 $n \geqslant n_1$,
$$
P\left(X_n \leqslant x_0+\varepsilon_1\right)-F\left(x_0+\varepsilon_1\right)<\frac{\delta}{3}, \quad P\left(\left|\eta_n\right| \geqslant \varepsilon_1\right)<\frac{\delta}{3} .
$$

于是,从 (*)式知,当 $n \geqslant n_1$ 时,
$$
P\left(X_n+\eta_n \leqslant x_0\right)-F\left(x_0\right)<\delta . \qquad (\circ)
$$

再取 $\varepsilon_2>0$ 使得 $F\left(x_0\right)-F\left(x_0-\varepsilon_2\right)<\frac{0}{3}$ 且 $x_0-\varepsilon_2$ 是 $F(x)$ 的连续点, 于是有 $n_2$使得当 $n \geqslant n_2$ 时, 恒有
$$
\begin{gathered}
P\left(X_n \leqslant x_0-\varepsilon_2\right)-F\left(x_0-\varepsilon_2\right)>-\frac{\delta}{3}, \\
P\left(\left|\eta_n\right| \geqslant \varepsilon_2\right)<\frac{\delta}{3},
\end{gathered}
$$

于是从 (**)式知, 当 $n \geqslant n_2$ 时, 有
$$
P\left(X_n+\eta_n \leqslant x_0\right)-F\left(x_0\right)>-\delta . \quad \quad (\circ\circ)
$$

从 ($\circ$)和 ($\circ\circ$) 式知 $n \geqslant \max \left(n_1, n_2\right)$ 时,
$$
\left|P\left(X_n+\eta_n \leqslant x_0\right)-F\left(x_0\right)\right|<\delta .
$$

这就证明了 $\lim _{n \rightarrow \infty} P\left(X_n+\eta_n \leqslant x_0\right)=F\left(x_0\right)$. 故 $X_n+\eta_n \stackrel{w}{\longrightarrow} X$.
\end{proof}
}}

\begin{theorem}
    设 $X_n \stackrel{w}{\longrightarrow} X, \eta_n \stackrel{P}{\longrightarrow} 1$, 则
$$
X_n \eta_n \stackrel{w}{\longrightarrow} X .
$$
\end{theorem}

有了这些定义, 我们可以探究一些当$n$特别大的时候, 会发生什么.